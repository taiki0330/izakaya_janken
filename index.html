<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./css/style.css" />
    <title>å±…é…’å±‹ã‚²ãƒ¼ãƒ </title>
  </head>
  <body>
    <div class="starter">
      <div class="hands">
        <button id="gu" class="button button_gu">ğŸ‘Š</button>
        <button id="choki" class="button button_choki">ğŸ¤˜</button>
        <button id="pa" class="button button_pa">âœ‹</button>
      </div>
      <div class="description">
        <p>1 ãŠäº’ã„ã«ğŸ‘Šã§å‹ã¤ã¨ã€ç„¼ãé³¥ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã§ä¸€æœ¬é¸ã¶</p>
        <p>2 ãŠäº’ã„ã«ğŸ¤˜ã§å‹ã¤ã¨ã€ãŠé…’ã‚’ãƒ©ãƒ³ãƒ€ãƒ ã§ä¸€æ¯é¸ã¶</p>
        <p>3 ãŠäº’ã„ã«âœ‹ã§å‹ã¤ã¨ã€50å††åˆ†ã®å‰²å¼•ãƒã‚¤ãƒ³ãƒˆã‚’ç²å¾—ã™ã‚‹</p>
        <p>4 20å›ã—ã¦å‹ã£ãŸæ•°ã®å¤šã„æ–¹ãŒå‹ã¡ã€‚è² ã‘ãŸæ–¹ã¯å…¨é¡å¥¢ã‚Šï¼ˆç¬‘ï¼‰</p>
      </div>
    </div>
    <div class="container">
      <div class="user_section">
        <div class="toggle_section">
          <button class="toggle_btn_1">å†…è¨³</button>
          <div class="toggle_box_1"></div>
        </div>
        <div class="user_box">
          <p>ãµãƒƒã‘ã„ãã‚“(ç¦å²¡)</p>
          <div class="user_img">
            <img src="./img/fukkeikunn.jpeg" alt="" />
          </div>
          <div class="stamp user_stamp">å¥¢ã‚Šï¼ï¼</div>
        </div>
      </div>

      <div class="computer_section">
        <div class="toggle_section">
          <button class="toggle_btn_2">å†…è¨³</button>
          <div class="toggle_box_2"></div>
        </div>
        <div class="computer_box">
          <p>ãƒ”ãƒ¼ãƒãã‚“(æ±äº¬)</p>
          <div class="computer_img">
            <img src="./img/pipokun.jpeg" alt="" />
          </div>
          <div class="stamp computer_stamp">å¥¢ã‚Šï¼ï¼</div>
        </div>
      </div>
    </div>
    <div class="wrapper"></div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script>
      // ãƒˆã‚°ãƒ«ãƒœã‚¿ãƒ³ã®æ“ä½œ
      $('.toggle_btn_1').on('click', function () {
        $('.toggle_box_1').slideToggle();
      });

      $('.toggle_btn_2').on('click', function () {
        $('.toggle_box_2').slideToggle();
      });

      // ãƒ‡ãƒ¼ã‚¿ã®é…åˆ—ã‚’ä½œæˆ
      // ç„¼ãé³¥ã®åå‰é…åˆ—
      const foodName = ['è±šãƒãƒ©', 'ã¼ã‚“ã˜ã‚Š', 'é¶çš®', 'ã‚µã‚¬ãƒª', 'ã¤ãã­'];
      // ç„¼ãé³¥ã®ä¾¡æ ¼é…åˆ—
      const foodPrice = [200, 220, 150, 400, 300];
      // ãŠé…’ã®åå‰é…åˆ—
      const drinkName = [
        'ãƒ“ãƒ¼ãƒ«',
        'èµ¤ãƒ¯ã‚¤ãƒ³',
        'ç™½ãƒ¯ã‚¤ãƒ³',
        'ãƒã‚¤ãƒœãƒ¼ãƒ«',
        'ãƒ¬ãƒ¢ãƒ³ã‚µãƒ¯ãƒ¼',
      ];
      // ãŠé…’ã®ä¾¡æ ¼é…åˆ—
      const drinkPrice = [500, 650, 650, 450, 400];

      // ã˜ã‚ƒã‚“ã‘ã‚“ã®æ‰‹ã®é…åˆ—
      const hands = ['gu', 'choki', 'pa'];

      // ã˜ã‚ƒã‚“ã‘ã‚“ã®å›æ•°
      let count = 0;
      // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å‹ã¡æ•°
      let userWin = 0;
      // ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã®å‹ã¡æ•°
      let computerWin = 0;
      // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ”¯æ‰•ã„é¡
      let userPay = 0;
      // ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã®æ”¯æ‰•ã„é¡
      let computerPay = 0;
      // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç²å¾—ãƒã‚¤ãƒ³ãƒˆ
      let userPoint = 0;
      // ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã®ç²å¾—ãƒã‚¤ãƒ³ãƒˆ
      let computerPoint = 0;

      // ã˜ã‚ƒã‚“ã‘ã‚“ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã®å‡¦ç†
      $('#gu, #choki, #pa').on('click', function () {
        const playerHand = $(this).attr('id');
        // ãƒ©ãƒ³ãƒ€ãƒ ã®æ•°ã‚’å–å¾—
        const i = Math.floor(Math.random() * hands.length);
        // ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã®æ‰‹ã‚’æ±ºå®š
        const computerHand = hands[i];
        // ï¼’ï¼å›æœªæº€ã®ã¨ã
        if (count < 5) {
          // å‹æ•—ã®å‡¦ç†
          if (playerHand === computerHand) {
            // æ–°ã—ã„Pã‚¿ã‚°ã‚’ä½œæˆ
            let newLine = $('<p>');
            // ä¸Šè¨˜Pã‚¿ã‚°ã«å…¥ã‚Œã‚‹ãƒ†ã‚­ã‚¹ãƒˆã‚’ä½œæˆ
            newLine.html('ã‚ã„ã“');
            // $('.wrapper').append(newLine);
          } else if (playerHand === 'gu' && computerHand === 'choki') {
            // ãƒ©ãƒ³ãƒ€ãƒ ãªæ•°ã‚’ç¢ºå®š
            const randomIndex = Math.floor(Math.random() * foodName.length);
            // ãƒ©ãƒ³ãƒ€ãƒ ãªç„¼ãé³¥ã®åå‰ã‚’å–å¾—
            const yakitori_1 = foodName[randomIndex];
            // ãƒ©ãƒ³ãƒ€ãƒ ãªç„¼ãé³¥ã®ä¾¡æ ¼ã‚’å–å¾—
            const yakitori_price_1 = foodPrice[randomIndex];
            // æ–°ã—ã„pã‚¿ã‚°ã‚’ä½œæˆ
            let newP = $('<p>');
            // ä¸Šè¨˜Pã‚¿ã‚°ã«å…¥ã‚Œã‚‹æ–‡å­—ã‚’ä½œæˆ
            newP.html(`${yakitori_1} (${yakitori_price_1}å††) x 1`);
            // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒˆã‚°ãƒ«ãƒœãƒƒã‚¯ã‚¹ã«ä¸Šè¨˜Pã‚¿ã‚°ã‚’è¿½åŠ 
            $('.toggle_box_1').append(newP);
            // å›æ•°ã‚’ï¼‘å›è¶³ã™
            count += 1;
            // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å‹ã¡æ•°ã‚’ï¼‘è¶³ã™
            userWin += 1;
            // ã‚†ãƒ¼ã–ãƒ¼ã®æ”¯æ‰•ã„é¡ã«ä¸Šè¨˜ç„¼ãé³¥ã®ä¾¡æ ¼ã‚’è¶³ã™
            userPay += yakitori_price_1;
            let newLine = $('<p>');
            newLine.html(
              `ç¬¬${count}å›ã€ãµã£ã‘ã„ãã‚“: ğŸ‘Šã€ ãƒ”ãƒ¼ãƒãã‚“: ğŸ¤˜ã€ ãµã£ã‘ã„ãã‚“ã®å‹ã¡`
            );
            // ä¸‹è¨˜ã‚¯ãƒ©ã‚¹ã®è¦ç´ ã«è¿½åŠ 
            $('.wrapper').append(newLine);
            console.log;
          } else if (playerHand === 'pa' && computerHand === 'gu') {
            count += 1;
            userWin += 1;
            userPoint += 50;
            let newLine = $('<p>');
            newLine.html(
              `ç¬¬${count}å›ã€ãµã£ã‘ã„ãã‚“: âœ‹ã€ ãƒ”ãƒ¼ãƒãã‚“: ğŸ‘Šã€ ãµã£ã‘ã„ãã‚“ã®å‹ã¡`
            );
            $('.wrapper').append(newLine);
          } else if (playerHand === 'choki' && computerHand === 'pa') {
            const randomIndex = Math.floor(Math.random() * drinkName.length);
            const drink_name_1 = drinkName[randomIndex];
            const drink_price_1 = drinkPrice[randomIndex];
            let newDinkP = $('<p>');
            newDinkP.html(`${drink_name_1}(${drink_price_1}å††) x 1`);
            $('.toggle_box_1').append(newDinkP);
            count += 1;
            userWin += 1;
            userPay += drink_price_1;
            let newLine = $('<p>');
            newLine.html(
              `ç¬¬${count}å›ã€ãµã£ã‘ã„ãã‚“: ğŸ¤˜ã€ ãƒ”ãƒ¼ãƒãã‚“: âœ‹ã€ ãµã£ã‘ã„ãã‚“ã®å‹ã¡`
            );
            console.log(newLine);
            $('.wrapper').append(newLine);
          } else if (playerHand === 'choki' && computerHand === 'gu') {
            const randomIndex = Math.floor(Math.random() * foodName.length);
            const yakitori_2 = foodName[randomIndex];
            const yakitori_price_2 = foodPrice[randomIndex];
            let newP = $('<p>');
            newP.html(`${yakitori_2}(${yakitori_price_2}å††) x 1`);
            $('.toggle_box_2').append(newP);
            count += 1;
            computerWin += 1;
            computerPay += yakitori_price_2;
            let newLine = $('<p>');
            newLine.html(
              `ç¬¬${count}å›ã€ãµã£ã‘ã„ãã‚“: ğŸ¤˜ã€ ãƒ”ãƒ¼ãƒãã‚“: ğŸ‘Šã€ ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼ã®å‹ã¡`
            );
            $('.wrapper').append(newLine);
          } else if (playerHand === 'pa' && computerHand === 'choki') {
            const randomIndex = Math.floor(Math.random() * drinkName.length);
            const drink_name_2 = drinkName[randomIndex];
            const drink_price_2 = drinkPrice[randomIndex];
            let newDinkP = $('<p>');
            newDinkP.html(`${drink_name_2}(${drink_price_2}å††) x 1`);
            $('.toggle_box_2').append(newDinkP);
            count += 1;
            computerWin += 1;
            computerPay += drink_price_2;
            let newLine = $('<p>');
            newLine.html(
              `ç¬¬${count}å›ã€ãµã£ã‘ã„ãã‚“: âœ‹ã€ ãƒ”ãƒ¼ãƒãã‚“: ğŸ¤˜ã€ ãƒ”ãƒ¼ãƒãã‚“ã®å‹ã¡`
            );
            $('.wrapper').append(newLine);
          } else if (playerHand === 'gu' && computerHand === 'pa') {
            count += 1;
            computerWin += 1;
            computerPoint += 50;
            let newLine = $('<p>');
            newLine.html(
              `ç¬¬${count}å›ã€ãµã£ã‘ã„ãã‚“: ğŸ‘Šã€ ãƒ”ãƒ¼ãƒãã‚“: âœ‹ã€ ãƒ”ãƒ¼ãƒãã‚“ã®å‹ã¡`
            );
            $('.wrapper').append(newLine);
          }
        } else {

          // ä¸Šã®èª¬æ˜æ–‡ã‚’å‰Šé™¤
          $('.hands').empty();
          $('.description').empty();

          // æ–°ã—ã„æ–‡ã‚’è¡¨ç¤º
          let newTitle = $('<h1>');
          newTitle.html("ã“ã®ãƒšãƒ¼ã‚¸ã‚’ã§ãã‚‹ã ã‘è¦šãˆã¦ãã ã•ã„")
          $('.hands').append(newTitle);


          // ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³
          let countDown = $('<span>');
          countDown.addClass('countDownTime');
          $('.description').append(countDown);
          // ã‚¹ã‚¿ãƒ¼ãƒˆé–‹å§‹æ™‚ã‚’ç©ºå®šç¾©
          let startTime;
          // ï¼‘ï¼•ç§’ã‚’å®šç¾©
          let originTime = 15;
          // ã‚¯ãƒ©ã‚¹ã‚’å–å¾—ã®ä¸Šã€è¡¨ç¤º
          const timer = document.querySelector('.countDownTime');
          function startTimer() {
            timer.innerText = originTime;
            // ã‚¹ã‚¿ãƒ¼ãƒˆé–‹å§‹æ™‚ã«ä»Šã®æ™‚é–“ã‚’å®šç¾©
            startTime = new Date();
            setInterval(function () {
              timer.innerText = originTime - getTimerTime();
              // ï¼ç§’ã«ãªã£ãŸã‚‰timeUP();ã‚’å®Ÿè¡Œ
              if(timer.innerHTML <= 0) timeUp();
            }, 1000);
          }
          // ä»Šã®æ™‚é–“ - ï¼‘ç§’å‰ã®æ™‚é–“ã‚’å¼•ã
          function getTimerTime() {
            return Math.floor((new Date() - startTime) / 1000);
          }
          // æ¬¡ã®ãƒšãƒ¼ã‚¸ã«é·ç§»
          function timeUp() {
            window.location.href = './question.html';
          }
          // é–¢æ•°å®Ÿè¡Œ
          startTimer();
          // countDown.html(10);

          $('.wrapper').empty();

          let newLine = $('<h3>');
          newLine.html('FINISHED!!');
          $('.wrapper').append(newLine);
          //     console.log('finished');

          const finalUserWin = userWin;
          let userScoreBord = $('<h3>');
          userScoreBord.addClass('left');
          userScoreBord.html(`ãµã£ã‘ã„ãã‚“: ${finalUserWin}å›ã®å‹ã¡`);
          $('.wrapper').append(userScoreBord);

          const finalComputerWin = computerWin;
          let computerScoreBord = $('<h3>');
          computerScoreBord.addClass('right');
          computerScoreBord.html(`ãƒ”ãƒ¼ãƒãã‚“: ${finalComputerWin}å›ã®å‹ã¡`);
          $('.wrapper').append(computerScoreBord);

          let userPayBord = $('<h3>');
          userPayBord.addClass('left');
          userPayBord.html(`ãµã£ã‘ã„ãã‚“: ${userPay}å††åˆ†ã®é£²é£Ÿ`);
          $('.wrapper').append(userPayBord);

          let computerPayBord = $('<h3>');
          computerPayBord.addClass('right');
          computerPayBord.html(`ãƒ”ãƒ¼ãƒãã‚“: ${computerPay}å††åˆ†ã®é£²é£Ÿ`);
          $('.wrapper').append(computerPayBord);

          let userPointBord = $('<h3>');
          userPointBord.addClass('left');
          userPointBord.html(`ãµã£ã‘ã„ãã‚“: ${userPoint}å††åˆ†ã®ãƒã‚¤ãƒ³ãƒˆç²å¾—`);
          $('.wrapper').append(userPointBord);

          let computerPointBord = $('<h3>');
          computerPointBord.addClass('right');
          computerPointBord.html(
            `ãƒ”ãƒ¼ãƒãã‚“: ${computerPoint}å††åˆ†ã®ãƒã‚¤ãƒ³ãƒˆç²å¾—`
          );
          $('.wrapper').append(computerPointBord);

          const finalUserPay = userPay - userPoint;
          const finalComputerPay = computerPay - computerPoint;

          let finalUserPayBord = $('<h3>');
          finalUserPayBord.addClass('left');
          finalUserPayBord.html(`ãµã£ã‘ã„ãã‚“: ${finalUserPay}å††ã®æ”¯æ‰•ã„é¡`);
          $('.wrapper').append(finalUserPayBord);

          let finalComputerPayBord = $('<h3>');
          finalComputerPayBord.addClass('right');
          finalComputerPayBord.html(
            `ãƒ”ãƒ¼ãƒãã‚“: ${finalComputerPay}å††ã®æ”¯æ‰•ã„é¡`
          );
          $('.wrapper').append(finalComputerPayBord);

          // åŒæ–¹ã®åˆè¨ˆé‡‘é¡ã‚’è¶³ã™
          const sumPay = finalUserPay + finalComputerPay;

          // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå‹ã¤
          if (finalUserWin > finalComputerWin) {
            $('.user_section').css('background-color', 'green');
            $('.computer_section').css('background-color', 'gray');
            $('.computer_stamp')
              .css('display', 'block')
              .html(`${sumPay}å††ã®å¥¢ã‚Š`);
          } else if (finalUserWin < finalComputerWin) {
            $('.computer_section').css('background-color', 'green');
            $('.user_section').css('background-color', 'gray');
            $('.user_stamp').css('display', 'block').html(`${sumPay}å††ã®å¥¢ã‚Š`);
          } else {
            $('.computer_section').css('background-color', 'gray');
            $('.user_section').css('background-color', 'gray');
          }
          // console.log(sumPay);
        }
      });

      // const randomNumber = Math.floor(Math.random() * 3);
      // let computerChoice = randomNumber;

      // for(let times = 0; times <= 5; times++) {
      //       $(".button_gu").on('click', function() {
      //             const useChoice = 0;

      //             if (computerChoice === 0) {
      //                   console.log("draw");
      //             } else if (computerChoice === 1) {
      //                   console.log("user win");
      //                   const randomIndex = Math.floor(Math.random() * foodName.length);
      //                   const yakitori_1 = foodName[randomIndex];
      //                   const yakitori_price_1 = foodPrice[randomIndex];
      //                   let newP = $('<p>');
      //                   newP.html(`${yakitori_1} (${yakitori_price_1}å††) x 1`);
      //                   $('.toggle_box_1').append(newP);
      //             } else {
      //                   console.log("computer win");
      //                   computerPoint += 100;
      //                   console.log(computerPoint);
      //             }
      //       });

      //       $(".button_choki").on('click', function() {
      //             const useChoice = 1;

      //             if (computerChoice === 1) {
      //                   console.log("draw");
      //             } else if (computerChoice === 2) {
      //                   console.log("user win");
      // const randomIndex = Math.floor(Math.random() * drinkName.length);
      // const drink_name_1 = drinkName[randomIndex];
      // const drink_price_1 = drinkPrice[randomIndex];
      // let newDinkP = $('<p>');
      // newDinkP.html(`${drink_name_1}(${drink_price_1}å††) x 1`);
      // $('.toggle_box_1').append(newDinkP);
      //             } else {
      // console.log("computer win");
      // const randomIndex = Math.floor(Math.random() * foodName.length);
      // const yakitori_2 = foodName[randomIndex];
      // const yakitori_price_2 = foodPrice[randomIndex];
      // let newP = $('<p>');
      // newP.html(`${yakitori_2}(${yakitori_price_2}å††) x 1`);
      // $('.toggle_box_2').append(newP);
      //             }
      //       });

      //       $(".button_pa").on('click', function() {
      //             const useChoice = 2;

      //             if (computerChoice === 2) {
      //                   console.log("draw");
      //             } else if (computerChoice === 0) {
      //                   console.log("user win");
      //                   userPoint += 100;
      //                   console.log(userPoint);
      //             } else{
      //                   console.log("computer win");
      // const randomIndex = Math.floor(Math.random() * drinkName.length);
      // const drink_name_2 = drinkName[randomIndex];
      // const drink_price_2 = drinkPrice[randomIndex];
      // let newDinkP = $('<p>');
      // newDinkP.html(`${drink_name_2}(${drink_price_2}å††) x 1`);
      // $('.toggle_box_2').append(newDinkP);
      //             }
      //       });
      // };
    </script>
  </body>
</html>
